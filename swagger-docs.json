{"openapi":"3.0.0","paths":{"/categories":{"get":{"operationId":"CategoryController_findAll","parameters":[],"responses":{"200":{"description":"List of categories retrieved successfully"}},"summary":"Retrieve all categories","tags":["categories"]},"post":{"operationId":"CategoryController_create","parameters":[],"responses":{"201":{"description":"The category has been successfully created"}},"summary":"Create a new category","tags":["categories"]}},"/categories/{id}":{"get":{"operationId":"CategoryController_findById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The category was found successfully"},"404":{"description":"Category not found"}},"summary":"Retrieve a category by ID","tags":["categories"]},"delete":{"operationId":"CategoryController_delete","parameters":[],"responses":{"204":{"description":"The category has been successfully deleted"},"404":{"description":"Category not found"}},"summary":"Delete a category","tags":["categories"]}},"/categories/{categoryId}/products":{"post":{"operationId":"CategoryController_createProduct","parameters":[{"name":"categoryId","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"responses":{"201":{"description":"The product has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProductDto"}}}},"400":{"description":"Invalid input data"}},"summary":"Create a new product","tags":["categories"]}},"/categories/{categoryId}/products/{productId}":{"delete":{"operationId":"CategoryController_deleteProduct","parameters":[{"name":"categoryId","required":true,"in":"path","schema":{"type":"string"}},{"name":"productId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"204":{"description":"The product has been successfully deleted"}},"summary":"Delete a product from a category","tags":["categories"]}},"/v1/customers/cpf":{"get":{"operationId":"CustomerController_findByCpf_v1","parameters":[{"name":"cpf","required":true,"in":"query","description":"Customer CPF (with or without formatting)","schema":{"example":"905.108.520-68","type":"string"}}],"responses":{"200":{"description":"The customer was found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Invalid CPF format"},"404":{"description":"Customer not found"}},"summary":"Find a customer by CPF","tags":["customers"]}},"/v1/customers":{"post":{"operationId":"CustomerController_create_v1","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerDto"}}}},"responses":{"201":{"description":"The customer has been successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Invalid input data"},"409":{"description":"Customer with this CPF already exists"}},"summary":"Create a new customer","tags":["customers"]},"get":{"operationId":"CustomerController_findAll_v1","parameters":[],"responses":{"200":{"description":"Customers list retrieved successfully","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CustomerResponseDto"}}}}}},"summary":"List all customers","tags":["customers"]}},"/v1/customers/{id}":{"get":{"operationId":"CustomerController_findById_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Customer ID","schema":{"type":"string"}}],"responses":{"200":{"description":"The customer was found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"404":{"description":"Customer not found"}},"summary":"Find a customer by ID","tags":["customers"]}},"/v1/order":{"post":{"operationId":"OrderController_create_v1","parameters":[],"requestBody":{"required":true,"description":"Order data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderDto"}}}},"responses":{"201":{"description":"Order created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"400":{"description":"Order has not been created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}}},"tags":["Order"]}},"/v1/order/all":{"get":{"operationId":"OrderController_getAll_v1","parameters":[{"name":"status","required":false,"in":"query","description":"Filter orders by status","schema":{"type":"string"}},{"name":"limit","required":false,"in":"query","description":"Number of orders per page","schema":{"type":"number"}},{"name":"page","required":false,"in":"query","description":"Page number for pagination","schema":{"type":"number"}}],"responses":{"200":{"description":"Orders retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderPaginationDto"}}}},"404":{"description":"Orders not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Order"]}},"/v1/order/{id}":{"get":{"operationId":"OrderController_findById_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Order found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Order"]},"delete":{"operationId":"OrderController_delete_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Order deleted successfully"},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Order"]}},"/v1/order/status/{id}":{"patch":{"operationId":"OrderController_updateStatus_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"New status for the order","content":{"application/json":{"schema":{"enum":["P","C","R","E","O","F"],"type":"string"},"examples":{"status":{"value":"O","description":"Order status options: P (PENDING), C (CANCELED), R (RECEIVED), E (IN_PROGRESS), O (READY), F (FINISHED)"}}}}},"responses":{"200":{"description":"Order status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"400":{"description":"Order status has not been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}}},"tags":["Order"]}},"/v1/order/order-item/{id}":{"delete":{"operationId":"OrderController_deleteOrderItem_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Order item deleted successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"400":{"description":"Order item has not been deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}}},"tags":["Order"]}},"/v1/order/{id}/customer":{"patch":{"operationId":"OrderController_updateCustomerId_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Order ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Customer ID updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderResponseDto"}}}},"400":{"description":"Cannot update customer ID due to order status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}},"404":{"description":"Order not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Order"]}},"/v1/payment":{"post":{"operationId":"PaymentController_create_v1","parameters":[],"requestBody":{"required":true,"description":"Payment data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentDto"}}}},"responses":{"201":{"description":"Payment created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponseDto"}}}},"400":{"description":"Payment has not been created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}}},"tags":["Payment"]}},"/v1/payment/{id}":{"get":{"operationId":"PaymentController_findById_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Payment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponseDto"}}}},"404":{"description":"Payment not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NotFoundException"}}}}},"tags":["Payment"]}},"/v1/payment/{id}/status":{"patch":{"operationId":"PaymentController_updateStatus_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Payment ID","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Payment status data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateStatusPaymentDto"}}}},"responses":{"200":{"description":"Payment status updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponseDto"}}}},"400":{"description":"Payment status has not been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BadRequestException"}}}}},"tags":["Payment"]}},"/stores":{"post":{"operationId":"StoresController_create","parameters":[],"responses":{"201":{"description":""}},"tags":["Stores"]},"get":{"operationId":"StoresController_findById","parameters":[],"responses":{"200":{"description":""}},"tags":["Stores"]}},"/stores/totems":{"post":{"operationId":"StoresController_createTotem","parameters":[],"responses":{"201":{"description":""}},"tags":["Stores"]}},"/stores/totems/{totemId}":{"delete":{"operationId":"StoresController_deleteTotem","parameters":[{"name":"totemId","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["Stores"]}},"/stores/totems/ping":{"get":{"operationId":"StoresController_pingFromTotem","parameters":[],"responses":{"200":{"description":""}},"tags":["Stores"]}},"/auth/login":{"post":{"operationId":"AuthController_login","parameters":[],"responses":{"201":{"description":""}},"tags":["Auth"]}}},"info":{"title":"API Tech Challenge - Phase One","description":"This application provides data from the cafeteria to customers and employees.","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"CreateProductDto":{"type":"object","properties":{"name":{"type":"string","description":"Product name","example":"Delicious Pizza"},"price":{"type":"number","description":"Product price","example":19.99},"description":{"type":"string","description":"Product description","example":"A delicious pizza with fresh ingredients."},"prep_time":{"type":"number","description":"Preparation time in minutes","example":30},"image_url":{"type":"string","description":"URL of the product image","example":"https://example.com/images/pizza.jpg"}},"required":["name","price","prep_time"]},"CustomerResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the customer","example":"123e4567-e89b-12d3-a456-426614174000"},"cpf":{"type":"string","description":"Customer CPF (with or without formatting)","example":"905.108.520-68"},"name":{"type":"string","description":"Customer name","example":"John Doe"},"email":{"type":"string","description":"Customer email","example":"john.doe@example.com"}},"required":["id","cpf","name","email"]},"CreateCustomerDto":{"type":"object","properties":{"cpf":{"type":"string","description":"Customer CPF (with or without formatting)","example":"905.108.520-68"},"name":{"type":"string","description":"Customer name","example":"John Doe"},"email":{"type":"string","description":"Customer email","example":"john.doe@example.com"}},"required":["cpf","name","email"]},"CreateOrderDto":{"type":"object","properties":{"storeId":{"type":"string","description":"ID of the store where the order is placed"},"totemId":{"type":"string","description":"ID of the totem where the order is placed"},"orderItems":{"description":"List of order items","example":[{"productId":"12345","quantity":2,"unitPrice":19.99}],"items":{"type":"array"},"type":"array"}},"required":["storeId","orderItems"]},"CustomerOrderDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the customer"},"cpf":{"type":"string","description":"CPF of the customer"},"name":{"type":"string","description":"Name of the customer"},"email":{"type":"string","description":"Email of the customer"}},"required":["id","cpf","name","email"]},"OrderItemResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the order item"},"orderId":{"type":"string","description":"Unique identifier for the order"},"productId":{"type":"string","description":"Unique identifier for the product"},"quantity":{"type":"number","description":"Quantity of the product in the order item"},"unitPrice":{"type":"number","description":"Unit price of the product in the order item"},"totalPrice":{"type":"number","description":"Total price of the order item"},"createdAt":{"format":"date-time","type":"string","description":"Creation date of the order item"}},"required":["id","orderId","productId","quantity","unitPrice","totalPrice","createdAt"]},"OrderResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the order"},"customer":{"description":"Customer information","allOf":[{"$ref":"#/components/schemas/CustomerOrderDto"}]},"status":{"type":"string","description":"Status of the order"},"totalPrice":{"type":"number","description":"Total price of the order"},"storeId":{"type":"string","description":"Unique identifier for the store"},"totemId":{"type":"string","description":"Unique identifier for the totem"},"orderItems":{"description":"List of order items","allOf":[{"$ref":"#/components/schemas/OrderItemResponseDto"}]},"createdAt":{"format":"date-time","type":"string","description":"Creation date of the order"}},"required":["id","status","totalPrice","storeId","orderItems","createdAt"]},"BadRequestException":{"type":"object","properties":{}},"OrderPaginationDto":{"type":"object","properties":{"data":{"description":"List orders","items":{"type":"array"},"type":"array"},"total":{"type":"number","description":"Total number of orders"},"page":{"type":"number","description":"Current page number"},"limit":{"type":"number","description":"Number of orders per page"},"totalPages":{"type":"number","description":"Total number of pages"},"hasNextPage":{"type":"boolean","description":"Indicates if there is a next page"},"hasPreviousPage":{"type":"boolean","description":"Indicates if there is a previous page"}},"required":["data","total","page","limit","totalPages","hasNextPage","hasPreviousPage"]},"NotFoundException":{"type":"object","properties":{}},"CreatePaymentDto":{"type":"object","properties":{"orderId":{"type":"string","description":"The ID of the Order"},"storeId":{"type":"string","description":"The ID of the Store"}},"required":["orderId","storeId"]},"PaymentResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the payment"},"orderId":{"type":"string","description":"Unique identifier for the order associated with the payment"},"storeId":{"type":"string","description":"Unique identifier for the store associated with the payment"},"paymentType":{"type":"string","enum":["QrCode","Pix","Dinheiro","Cart√£o"],"description":"Type of payment"},"status":{"type":"string","enum":["P","A","R","C"],"description":"Status of the payment"},"total":{"type":"number","description":"Total amount of the payment"},"externalId":{"type":"string","description":"Unique identifier for the payment in the external system"},"qrCode":{"type":"string","description":"QR code for the payment"},"plataform":{"type":"string","enum":["Mercado Pago","Stripe","Fake Provider"],"description":"Platform used for the payment"},"createdAt":{"format":"date-time","type":"string","description":"Date and time when the payment was created"}},"required":["id","orderId","storeId","paymentType","status","total","externalId","qrCode","plataform","createdAt"]},"UpdateStatusPaymentDto":{"type":"object","properties":{"status":{"type":"string","description":"The status of the payment","enum":["P","A","R","C"]}},"required":["status"]}}}}