{"openapi":"3.0.0","paths":{"/v1/customers":{"post":{"operationId":"CustomerController_create_v1","parameters":[],"requestBody":{"required":true,"description":"Customer data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCustomerDto"}}}},"responses":{"201":{"description":"Customer created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerIdDto"}}}},"400":{"description":"Customer has not been created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}},"409":{"description":"Customer has not been created, already exists","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"api-key":[]}],"summary":"Register your customer","tags":["Customer"]},"get":{"operationId":"CustomerController_findAll_v1","parameters":[{"name":"page","required":false,"in":"query","description":"Page number for pagination","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of customers per page","schema":{"type":"number"}},{"name":"cpf","required":false,"in":"query","description":"Filter by customer CPF","schema":{"type":"string"}},{"name":"name","required":false,"in":"query","description":"Filter by customer name","schema":{"type":"string"}},{"name":"email","required":false,"in":"query","description":"Filter by customer email","schema":{"type":"string"}}],"responses":{"200":{"description":"Customers list retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerPaginationDto"}}}},"404":{"description":"Customers not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"api-key":[]}],"summary":"List all customers","tags":["Customer"]}},"/v1/customers/{id}":{"get":{"description":"Retrieves the customer based on the customerId.","operationId":"CustomerController_findById_v1","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Customer found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"404":{"description":"Customer not found or does not exist","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"api-key":[]}],"summary":"Find Customer","tags":["Customer"]}},"/v1/customers/cpf/{cpf}":{"get":{"operationId":"CustomerController_findByCpf_v1","parameters":[{"name":"cpf","required":true,"in":"path","description":"CPF customer","schema":{"example":"12609871677","type":"string"}}],"responses":{"200":{"description":"The customer was found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerResponseDto"}}}},"400":{"description":"Invalid CPF format","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}},"404":{"description":"Customer not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"api-key":[]}],"summary":"Find a customer by CPF","tags":["Customer"]}},"/v1/payment":{"post":{"operationId":"PaymentController_create_v1","parameters":[],"requestBody":{"required":true,"description":"Payment data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentDto"}}}},"responses":{"201":{"description":"Payment created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponseDto"}}}},"400":{"description":"Payment has not been created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"totem-token":[]},{"access-token":[]}],"summary":"Register payment","tags":["Payment"]}},"/v1/payment/{id}":{"get":{"operationId":"PaymentController_findById_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Payment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment found successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentResponseDto"}}}},"404":{"description":"Payment not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"totem-token":[]},{"access-token":[]}],"summary":"Find Payment","tags":["Payment"]}},"/v1/payment/{id}/approve":{"patch":{"operationId":"PaymentController_approvePaymentHook_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Payment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment status updated successfully"},"400":{"description":"Payment status has not been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"external-payment-consumer-key":[]}],"summary":"Approve Payment","tags":["Payment"]}},"/v1/payment/{id}/cancel":{"patch":{"operationId":"PaymentController_cancelPaymentHook_v1","parameters":[{"name":"id","required":true,"in":"path","description":"Payment ID","schema":{"type":"string"}}],"responses":{"200":{"description":"Payment status updated successfully"},"400":{"description":"Payment status has not been updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BusinessException"}}}}},"security":[{"external-payment-consumer-key":[]}],"summary":"Cancel Payment","tags":["Payment"]}}},"info":{"title":"Microservice Customer and Payment","description":"This application is a micro service for the cafeteria that provides customer and payment data.","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"api-key":{"type":"apiKey","in":"header","name":"x-api-key"}},"schemas":{"CreateCustomerDto":{"type":"object","properties":{"name":{"type":"string","description":"The name of the customer","example":"João Silva"},"email":{"type":"string","description":"The email of the customer","example":"joao@email.com"},"cpf":{"type":"string","description":"The number of the customer","example":30}},"required":["name","email","cpf"]},"CustomerIdDto":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the customer"}},"required":["id"]},"BusinessException":{"type":"object","properties":{"message":{"type":"string","description":"Error description"},"statusCode":{"type":"number","description":"Code error"},"error":{"type":"string","description":"Type Error"}},"required":["message","statusCode","error"]},"CustomerResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"The ID of the customer","example":"c84079b9-b1ba-4223-812f-d1f1435ea34d"},"name":{"type":"string","description":"The name of the customer","example":"João Silva"},"email":{"type":"string","description":"The email of the customer","example":"joao@email.com"},"cpf":{"type":"string","description":"The age of the customer","example":30},"storeId":{"type":"string","description":"The store ID associated with the customer","example":"s84079b9-b1ba-4223-812f-d1f1435ea34d"}},"required":["id","name","email","cpf"]},"CustomerPaginationDto":{"type":"object","properties":{"data":{"description":"List customers","type":"array","items":{"$ref":"#/components/schemas/CustomerResponseDto"}},"total":{"type":"number","description":"Total list"},"page":{"type":"number","description":"Page current"},"limit":{"type":"number","description":"limit of records per page"},"totalPages":{"type":"number","description":"Total of pages"}},"required":["data","total","page","limit","totalPages"]},"CreatePaymentDto":{"type":"object","properties":{"orderId":{"type":"string","description":"The ID of the Order"}},"required":["orderId"]},"PaymentResponseDto":{"type":"object","properties":{"id":{"type":"string","description":"Unique identifier for the payment","example":"0fa30d74-877b-4a5b-8cc3-cc72105b7015"},"orderId":{"type":"string","description":"Unique identifier for the order associated with the payment","example":"0fa30d74-877b-4a5b-8cc3-cc72105b7015"},"externalId":{"type":"string","description":"Unique identifier for the resource in the payment provider","example":"0fa30d74-877b-4a5b-8cc3-cc72105b7015"},"paymentType":{"type":"string","enum":["QrCode","Pix","Dinheiro","Cartão"],"description":"Type of payment","example":"QrCode"},"status":{"type":"string","enum":["P","A","R","C"],"description":"Status of the payment","example":"P"},"total":{"type":"number","description":"Total amount of the payment","example":50},"qrCode":{"type":"string","description":"QR code for the payment","example":"00020101021226930014BR.GOV.BCB.PIX0136FAKE-MOCK..."},"platform":{"type":"string","enum":["Mercado Pago","Stripe","Fake Provider"],"description":"Platform used for the payment","example":"Mercado Pago"}},"required":["id","orderId","externalId","paymentType","status","total","qrCode","platform"]}}}}